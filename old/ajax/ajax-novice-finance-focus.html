<div class="item-marquee list-box" id="marqueeNovice">
  <span class="prev"></span>
  <span class="next"></span>
  <div class="box">
    <ul class="clearfix">
      <li>
        <p class="bg"><img src="/static/images/novice-focus-area2.png"></p>
        <div class="cont">
          <p class="bank-logo"><img src="/static/images/test.png" alt=""></p>
          <p class="title">招商银行"步步稳"系列保本投资产版2581532期期</p>
          <ul class="clearfix">
            <li class="profit">
              <p class="pt rise"><span class="value1">6.60</span>%</p>
              <p class="lt">预期年化收益</p>
            </li>
            <li class="lowest">
              <p class="pt"><span class="value2">100</span>万</p>
              <p class="lt">起购金额</p>
            </li>
            <li class="deadline">
              <p class="pt"><span class="value2">382</span>天</p>
              <p class="lt">理财期限</p>
            </li>
          </ul>
          <div class="surplus-time">
            <!--开售倒计时或者售罄倒计时-->
            <p class="what">开售倒计时：</p>
            <!--data-surplus : 剩余的毫秒数-->
            <p class="time countdown" data-surplus="60000"><span class="t-value day"></span>天<span class="t-value hour"></span>时<span class="t-value minute"></span>分<span class="t-value second"></span>秒</p>
          </div>
          <a href="#" class="btn-buy">马上预约</a>
        </div>
      </li>
      <li>
        <p class="bg"><img src="/static/images/novice-focus-area2.png"></p>
        <div class="cont">
          <p class="bank-logo"><img src="/static/images/test.png" alt=""></p>
          <p class="title">招商银行"步步稳"系列保本投资产版2581532期期</p>
          <ul class="clearfix">
            <li class="profit">
              <p class="pt rise"><span class="value1">6.60</span>%</p>
              <p class="lt">预期年化收益</p>
            </li>
            <li class="lowest">
              <p class="pt"><span class="value2">100</span>万</p>
              <p class="lt">起购金额</p>
            </li>
            <li class="deadline">
              <p class="pt"><span class="value2">永久</span></p>
              <p class="lt">理财期限</p>
            </li>
          </ul>
          <div class="surplus-time">
            <!--开售倒计时或者售罄倒计时-->
            <p class="what">开售倒计时：</p>
            <!--data-surplus : 剩余的毫秒数-->
            <p class="time countdown" data-surplus="60000"><span class="t-value day"></span>天<span class="t-value hour"></span>时<span class="t-value minute"></span>分<span class="t-value second"></span>秒</p>
          </div>
          <a href="#" class="btn-buy">马上预约</a>
        </div>
      </li>
      <li>
        <p class="bg"><img src="/static/images/novice-focus-area2.png"></p>
        <div class="cont">
          <p class="bank-logo"><img src="/static/images/test.png" alt=""></p>
          <p class="title">招商银行"步步稳"系列保本投资产版2581532期期</p>
          <ul class="clearfix">
            <li class="profit">
              <p class="pt rise"><span class="value1">6.60</span>%</p>
              <p class="lt">预期年化收益</p>
            </li>
            <li class="lowest">
              <p class="pt"><span class="value2">100</span>万</p>
              <p class="lt">起购金额</p>
            </li>
            <li class="deadline">
              <p class="pt"><span class="value2">永久</span></p>
              <p class="lt">理财期限</p>
            </li>
          </ul>
          <div class="surplus-time">
            <!--开售倒计时或者售罄倒计时-->
            <p class="what">开售倒计时：</p>
            <!--data-surplus : 剩余的毫秒数-->
            <p class="time countdown" data-surplus="60000"><span class="t-value day"></span>天<span class="t-value hour"></span>时<span class="t-value minute"></span>分<span class="t-value second"></span>秒</p>
          </div>
          <a href="#" class="btn-buy">马上预约</a>
        </div>
      </li>
      <li>
        <p class="bg"><img src="/static/images/novice-focus-area2.png"></p>
        <div class="cont">
          <p class="bank-logo"><img src="/static/images/test.png" alt=""></p>
          <p class="title">招商银行"步步稳"系列保本投资产版2581532期期</p>
          <ul class="clearfix">
            <li class="profit">
              <p class="pt rise"><span class="value1">6.60</span>%</p>
              <p class="lt">预期年化收益</p>
            </li>
            <li class="lowest">
              <p class="pt"><span class="value2">100</span>万</p>
              <p class="lt">起购金额</p>
            </li>
            <li class="deadline">
              <p class="pt"><span class="value2">永久</span></p>
              <p class="lt">理财期限</p>
            </li>
          </ul>
          <div class="surplus-time">
            <!--开售倒计时或者售罄倒计时-->
            <p class="what">开售倒计时：</p>
            <!--data-surplus : 剩余的毫秒数-->
            <p class="time countdown" data-surplus="60000"><span class="t-value day"></span>天<span class="t-value hour"></span>时<span class="t-value minute"></span>分<span class="t-value second"></span>秒</p>
          </div>
          <a href="#" class="btn-buy">马上预约</a>
        </div>
      </li>
      <li>
        <p class="bg"><img src="/static/images/novice-focus-area2.png"></p>
        <div class="cont">
          <p class="bank-logo"><img src="/static/images/test.png" alt=""></p>
          <p class="title">招商银行"步步稳"系列保本投资产版2581532期期</p>
          <ul class="clearfix">
            <li class="profit">
              <p class="pt rise"><span class="value1">6.60</span>%</p>
              <p class="lt">预期年化收益</p>
            </li>
            <li class="lowest">
              <p class="pt"><span class="value2">100</span>万</p>
              <p class="lt">起购金额</p>
            </li>
            <li class="deadline">
              <p class="pt"><span class="value2">永久</span></p>
              <p class="lt">理财期限</p>
            </li>
          </ul>
          <div class="surplus-time">
            <!--开售倒计时或者售罄倒计时-->
            <p class="what">开售倒计时：</p>
            <!--data-surplus : 剩余的毫秒数-->
            <p class="time countdown" data-surplus="60000"><span class="t-value day"></span>天<span class="t-value hour"></span>时<span class="t-value minute"></span>分<span class="t-value second"></span>秒</p>
          </div>
          <a href="#" class="btn-buy">马上预约</a>
        </div>
      </li>
      <li>
        <p class="bg"><img src="/static/images/novice-focus-area2.png"></p>
        <div class="cont">
          <p class="bank-logo"><img src="/static/images/test.png" alt=""></p>
          <p class="title">招商银行"步步稳"系列保本投资产版2581532期期</p>
          <ul class="clearfix">
            <li class="profit">
              <p class="pt rise"><span class="value1">6.60</span>%</p>
              <p class="lt">预期年化收益</p>
            </li>
            <li class="lowest">
              <p class="pt"><span class="value2">100</span>万</p>
              <p class="lt">起购金额</p>
            </li>
            <li class="deadline">
              <p class="pt"><span class="value2">永久</span></p>
              <p class="lt">理财期限</p>
            </li>
          </ul>
          <div class="surplus-time">
            <!--开售倒计时或者售罄倒计时-->
            <p class="what">开售倒计时：</p>
            <!--data-surplus : 剩余的毫秒数-->
            <p class="time countdown" data-surplus="60000"><span class="t-value day"></span>天<span class="t-value hour"></span>时<span class="t-value minute"></span>分<span class="t-value second"></span>秒</p>
          </div>
          <a href="#" class="btn-buy">马上预约</a>
        </div>
      </li>
    </ul>
  </div>
</div>
<script type="text/javascript">
//轮播动画
function Focus(element,options){
  var self = this;
  this.wrap = $(element);

  this.public = {
    auto:true,
    time:5000
  }

  jQuery.extend(this.public,options);

  this.wrap.on("click",".prev",function(){
    self.myHandler("left");
  });
  this.wrap.on("click",".next",function(){
    self.myHandler("right");
  });
  this.wrap.on("click",".indicators li",function(){
    var dir = $(this).index();
    self.myHandler(dir);
  });
  this.wrap.on("click",".box > ul > li",function(){
    var dir = $(this).index();
    self.myHandler(dir);
  });
  this.install();
}

Focus.prototype = {

  //获取动画element的index
  myHandler : function(dir){
    var oldIndex = this.indicators.filter(".active").index();
    var newIndex;

    if(dir=="left"){
      newIndex = oldIndex-1;
    }else if(dir=="right"){
      newIndex = oldIndex+1;
    }else{
      newIndex = dir;
    }
    if(newIndex==-1 || newIndex==this.length || newIndex==oldIndex){
      return;
    }
    this.slide(oldIndex,newIndex);
  },

  //动画
  slide : function(oldIndex,newIndex){
    var distance;
    var speed1 = 1000;
    var speed2 = 1000;
    var self = this;
    
    distance = this.itemWidth-(newIndex)*this.itemWidth;

    if(this.content.is(":animated")){
      return;
    }

    this.indicators.eq(oldIndex).removeClass("active");
    this.indicators.eq(newIndex).addClass("active");

    this.content.animate({"left":distance}, speed1);

    this.item.eq(oldIndex).find(".title").height("36px");
    this.item.eq(oldIndex).find(".surplus-time, .btn-buy, .lowest, .deadline").hide();
    this.item.eq(oldIndex).animate({width:this.w1,height:this.h1,marginTop:100}, speed2,function(){
      $(this).removeClass('active').attr("style","");
      $(this).find(".title, .surplus-time, .btn-buy, .lowest, .deadline").attr("style","");
      $(this).find(".bg img").attr("src","/static/images/novice-focus-area2.png");
    })

    this.item.eq(newIndex).find(".bg img").attr("src","/static/images/novice-focus-area1.png");
    this.item.eq(newIndex).animate({width:this.w2,height:this.h2,marginTop:0}, speed2,function(){
      $(this).addClass('active').attr("style","");
    })
  },

  //初始化
  install : function(){
    this.content = this.wrap.find(".box > ul");
    this.item = this.wrap.find(".box > ul > li");
    this.length = this.item.size();
    this.itemWidth = this.item.eq(0).outerWidth(true);
    this.w1 = this.item.eq(0).width();
    this.h1 = this.item.eq(0).height();

    var indicatorsTxt;
    //生成indicators控制指标
    indicatorsTxt = '<ol class="indicators">';
    for(var i=0;i<this.length;i++){
      if(i==1){
        indicatorsTxt += '<li class="active"></li>';
      }else{
        indicatorsTxt += '<li></li>';
      }
    }
    indicatorsTxt +='</ol>';
    this.wrap.append(indicatorsTxt);
    this.indicators = this.wrap.find(".indicators li");
    this.item.eq(1).addClass('active');
    this.item.eq(1).find(".bg img").attr("src","/static/images/novice-focus-area1.png")
    this.w2 = this.item.eq(1).width();
    this.h2 = this.item.eq(1).height();
  }
}

var focus = new Focus("#marqueeNovice");

//倒计时
$(".countdown").countdown();

</script>
